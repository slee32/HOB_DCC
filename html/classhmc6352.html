<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HOB_DCC: hmc6352 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="HOBPoster.2018.12.07.2.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HOB_DCC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classhmc6352-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">hmc6352 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Driver for a Honeywell HMC6352 digital compass.  
 <a href="classhmc6352.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="hmc6352_8h_source.html">hmc6352.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab5184a9e62607a012a004775bde3b9b3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhmc6352.html#ab5184a9e62607a012a004775bde3b9b3">hmc6352</a> (<a class="el" href="classi2c__master.html">i2c_master</a> *p_I2C, <a class="el" href="classemstream.html">emstream</a> *p_ser_dev=NULL)</td></tr>
<tr class="memdesc:ab5184a9e62607a012a004775bde3b9b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an HMC6352 driver object.  <a href="#ab5184a9e62607a012a004775bde3b9b3">More...</a><br /></td></tr>
<tr class="separator:ab5184a9e62607a012a004775bde3b9b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9749c66a3fd7e810cb4d2a127f4ee3a"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhmc6352.html#af9749c66a3fd7e810cb4d2a127f4ee3a">heading</a> (void)</td></tr>
<tr class="memdesc:af9749c66a3fd7e810cb4d2a127f4ee3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a heading from the HMC6352 compass module.  <a href="#af9749c66a3fd7e810cb4d2a127f4ee3a">More...</a><br /></td></tr>
<tr class="separator:af9749c66a3fd7e810cb4d2a127f4ee3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfcdf7f910dfb1093526d23337a845e7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhmc6352.html#adfcdf7f910dfb1093526d23337a845e7">continuous_mode</a> (void)</td></tr>
<tr class="separator:adfcdf7f910dfb1093526d23337a845e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057b597abd5b686b99e5c482b7d654d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhmc6352.html#a057b597abd5b686b99e5c482b7d654d6">standby_mode</a> (void)</td></tr>
<tr class="separator:a057b597abd5b686b99e5c482b7d654d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4baec95d0ffb2268b69c2813786e6893"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhmc6352.html#a4baec95d0ffb2268b69c2813786e6893">set_mode</a> (uint8_t mode_byte)</td></tr>
<tr class="memdesc:a4baec95d0ffb2268b69c2813786e6893"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the mode byte of the HMC6352 compass module.  <a href="#a4baec95d0ffb2268b69c2813786e6893">More...</a><br /></td></tr>
<tr class="separator:a4baec95d0ffb2268b69c2813786e6893"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ae4e3a8544c78f5bdb2f6bbb7a6ecea39"><td class="memItemLeft" align="right" valign="top"><a id="ae4e3a8544c78f5bdb2f6bbb7a6ecea39"></a>
<a class="el" href="classi2c__master.html">i2c_master</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhmc6352.html#ae4e3a8544c78f5bdb2f6bbb7a6ecea39">p_i2c</a></td></tr>
<tr class="memdesc:ae4e3a8544c78f5bdb2f6bbb7a6ecea39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to an I2C driver used to communicate with the HMC6352. <br /></td></tr>
<tr class="separator:ae4e3a8544c78f5bdb2f6bbb7a6ecea39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fcdee7ddbc8d738426e19053836a819"><td class="memItemLeft" align="right" valign="top"><a id="a4fcdee7ddbc8d738426e19053836a819"></a>
<a class="el" href="classemstream.html">emstream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhmc6352.html#a4fcdee7ddbc8d738426e19053836a819">p_serial</a></td></tr>
<tr class="memdesc:a4fcdee7ddbc8d738426e19053836a819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a serial device which can be used for debugging. <br /></td></tr>
<tr class="separator:a4fcdee7ddbc8d738426e19053836a819"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Driver for a Honeywell HMC6352 digital compass. </p>
<p>This class is a driver for a Honeywell HMC6352 compass. It's very basic and does not use all the HMC6352's functions; it is set up only to put the compass in standby mode and take a heading measurement when asked for, or optionally to put the compass into continuous measurement mode (in which the compass measures its heading once every second) and then read out the previous heading measurement quickly on demand. Usually the standby mode is the best option because</p><ul>
<li>It has been tested more extensively</li>
<li>It saves power</li>
<li>It only takes about 6 ms for the sensor to wake up and get a reading</li>
</ul>
<h1><a class="anchor" id="use_hmc6352"></a>
Usage</h1>
<p>To use this driver, one need only create the driver object and then ask it for a heading now and then. </p><div class="fragment"><div class="line"><a class="code" href="classhmc6352.html">hmc6352</a>* p_honey = <span class="keyword">new</span> <a class="code" href="classhmc6352.html#ab5184a9e62607a012a004775bde3b9b3">hmc6352</a> (<a class="code" href="classhmc6352.html#a4fcdee7ddbc8d738426e19053836a819">p_serial</a>);</div><div class="line">...</div><div class="line">*<a class="code" href="classhmc6352.html#a4fcdee7ddbc8d738426e19053836a819">p_serial</a> &lt;&lt; <a class="code" href="emstream_8h.html#a076d1892c2e1133e4cc5469015af6423">PMS</a> (<span class="stringliteral">&quot;HMC6352: &quot;</span>) &lt;&lt; p_honey-&gt;get_heading () &lt;&lt; <a class="code" href="emstream_8h.html#a5582483c459c0f48e51d96478d5b3407a5cbad4ad24fd9b8c066cdad096cd2f18">endl</a>;</div></div><!-- fragment --> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab5184a9e62607a012a004775bde3b9b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5184a9e62607a012a004775bde3b9b3">&#9670;&nbsp;</a></span>hmc6352()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hmc6352::hmc6352 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classi2c__master.html">i2c_master</a> *&#160;</td>
          <td class="paramname"><em>p_I2C</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classemstream.html">emstream</a> *&#160;</td>
          <td class="paramname"><em>p_ser_dev</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an HMC6352 driver object. </p>
<p>This constructor creates an HMC6352 driver object and saves pointers to the serial port and I2C bus driver associated with it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_I2C</td><td>A pointer to the I2C driver used to talk to the sensor </td></tr>
    <tr><td class="paramname">p_ser_dev</td><td>A serial device for debugging text (default: <code>NULL</code>) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="adfcdf7f910dfb1093526d23337a845e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfcdf7f910dfb1093526d23337a845e7">&#9670;&nbsp;</a></span>continuous_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hmc6352::continuous_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method puts the HMC6352 in continuous mode, which means that once per second, the compass takes a reading and updates its output register. The heading can then be read quickly, as it will be 16 bits just waiting to be read. The mode is not stored in EEPROM, so unless a command to store the mode is called elsewhere, the mode will be reset to standby mode when the power is next turned off and on. </p>

</div>
</div>
<a id="af9749c66a3fd7e810cb4d2a127f4ee3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9749c66a3fd7e810cb4d2a127f4ee3a">&#9670;&nbsp;</a></span>heading()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t hmc6352::heading </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a heading from the HMC6352 compass module. </p>
<p>This method gets a heading from the HMC6352 compass. It assumes that the sensor is in standby mode; this means that it is necessary to send an 'A' command, then wait until the sensor has measured and computed its heading, then read the heading. All this means that the <code><a class="el" href="classhmc6352.html#af9749c66a3fd7e810cb4d2a127f4ee3a" title="Get a heading from the HMC6352 compass module. ">heading()</a></code> method takes quite some time to run. <b>Note:</b> This method must be called from within a FreeRTOS task because the <code>vTaskDelay()</code> method is used to implement an efficient wait while the sensor prepares a reading. </p><dl class="section return"><dt>Returns</dt><dd>The measured heading, in tenths of a degree of angle, or 999.9 for errors </dd></dl>

</div>
</div>
<a id="a4baec95d0ffb2268b69c2813786e6893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4baec95d0ffb2268b69c2813786e6893">&#9670;&nbsp;</a></span>set_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hmc6352::set_mode </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>mode_byte</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the mode byte of the HMC6352 compass module. </p>
<p>This method sets the mode byte of the HMC6352. The mode is only set in RAM unless saved in EEPROM by some other bit of code. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode_byte</td><td>A byte specifying the mode into which the sensor will be set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if there was a problem setting the mode, <code>false</code> if it went OK </dd></dl>

</div>
</div>
<a id="a057b597abd5b686b99e5c482b7d654d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a057b597abd5b686b99e5c482b7d654d6">&#9670;&nbsp;</a></span>standby_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void hmc6352::standby_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method puts the HMC6352 in standby mode, where it's pretty much asleep. If one wants to find the heading, one must send an 'A' command to force a measurement. Standby mode is the factory default mode at startup. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/sensors/<a class="el" href="hmc6352_8h_source.html">hmc6352.h</a></li>
<li>lib/sensors/<a class="el" href="hmc6352_8cpp.html">hmc6352.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
